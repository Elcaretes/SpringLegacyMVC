!function(a){a.Baas=a.Baas||{},a.Baas.VERSION="1.1.2";a.Baas;"undefined"!=typeof exports&&(a.isServer=!0,a.$=require("jquery"),a._=require("underscore"),a.Q=require("q"),a.Backbone=require("backbone"),a.Express=require("express"))}(this),function(a,b){var c=function(c,d,e,f){b.Baas=a(b.$,b._,b.Q,b.Backbone),b.isServer&&(b.Baas.isServer=!0)};"function"==typeof define&&define.amd?define(["jquery","underscore","q","Backbone"],c):c(this.$,this._,this.Q,this.Backbone)}(function(a,b,c,d){var e={};return function(e){e.API_KEY="",e.ROOT_URL="https://apis.sktelecom.com",e.URL=e.ROOT_URL+"/v1/baas",e.ERROR_CODE={REQUIRED_PARAMETERS:"9401",FAIL_TO_AUTHENTICATION:"9403",FORBIDDEN_TO_ACCESS:"9404",REQUIRED_HEADERS:"9405",REQUIRED_TABLE_NAME:"1103",INVALID_GEOPOINT_TYPE:"0101",REQUIRED_MANDATORY_COLUMNS:"0002",INVALID_JSON_TYPE:"1107",INVALID_OBJECT:"1108",INVALID_TYPE:"1111",INVALID_EMAIL:"1125",NOT_EXITST_COLUMN:"1126",NOT_PREPARE_SEND_VERIFY_EMAIL:"1127",EXISTS_OBJECT_ID:"1131"};var f=function(a){var b={TDCProjectKey:e.API_KEY},c=e.User.getMe();return c&&c.isLoggedIn()&&(b.sessionToken=c.get("sessionToken")),b};d.ajax=function(d){var e=c.defer();d=b.defaults(d||{},{dataType:"json"}),d.headers=b.defaults(d.headers||{},f(d.url));try{a.ajax(d).then(function(a){a=a||{},e.resolve(a)},function(a){e.reject(a)})}catch(g){e.reject(g)}return e.promise}}(e),function(a){var c=["objectId","createdAt","updatedAt"],e={ADD:"Add",ADD_UNIQUE:"AddUnique",REMOVE:"Remove",DELETE:"Delete",INCREMENT:"Increment",ADD_RELATION:"AddRelation",REMOVE_RELATION:"RemoveRelation"},f={RELATION:"Relation"};a.Object=d.Model.extend({name:"",idAttribute:"objectId",urlRoot:function(){return a.URL+"/data/"+this.name},initialize:function(a,b){b=b||{},b.include&&this.include(b.include),this._operations={},this.listenTo(this,"sync",function(){this._operations={}})},toJSON:function(){var e=d.Model.prototype.toJSON.apply(this,arguments);return b.each(c,function(a){"undefined"!=typeof e[a]&&delete e[a]}),b.each(this.attributes,function(b,c){b instanceof a.Relation&&delete e[c]},this),b.each(this._operations,function(a,b){e[b]=a}),e.objectId&&delete e.objectId,e},parse:function(c){return c=b.clone(c),c.createdAt=new a.Date(c.createdAt),c.updatedAt=new a.Date(c.updatedAt||c.createdAt.toString()),b.each(c,function(d,e){if("object"==typeof d)if(d.__type)switch(d.__type){case"Date":c[e]=new a.Date(d);break;case"Pointer":c[e]=new a.Pointer(d,null,this,e);break;case"Relation":c[e]=new a.Relation(d,this,e)}else"ACL"===e?c[e]=new a.Acl(d):b.isEqual(a.GeoPoint.keys,b.keys(d))?c[e]=new a.GeoPoint(d):d.url&&d.name&&d.createdAt&&(c[e]=new a.File(d))},this),c},set:function(c,e,f){return"object"==typeof c?(b.each(c,function(a,b){this.set(b,a,f)},this),this):(f=f||{},e instanceof Date?e=new a.Date(e):e instanceof a.File?e={url:e.get("url"),name:e.get("name"),createdAt:e.get("createdAt")}:e instanceof a.Object?e=new a.Pointer(e,null,this,c):e instanceof a.Table?e=new a.Relation(e,this,c):(e instanceof a.Relation||e instanceof a.Pointer)&&(e.setParent(this),e.setKey(c)),!f.skipDeleteOperation&&this._operations&&c in this._operations&&delete this._operations[c],d.Model.prototype.set.call(this,c,e,f))},unset:function(b,c){var f=this.get(b),g=f&&f instanceof a.Relation?e.REMOVE_RELATION:e.DELETE;return d.Model.prototype.unset.call(this,b,c),this._operations[b]={__op:g},this},fetch:function(a){var c=this;return a=a||{},this._include&&(a=b.defaults(a,{data:{include:this._include}})),d.Model.prototype.fetch.call(this,a).then(function(){return c})},save:function(a,c,e){var f,g=this;return null===a||"object"==typeof a?(f=a,e=c):(f={})[a]=c,e=e||{},f&&("success"in f&&b.isFunction(f.success)&&(e.success=f.success,delete f.success),"error"in f&&b.isFunction(f.error)&&(e.error=f.error,delete f.error)),d.Model.prototype.save.call(this,f,e).then(function(){return this._addOperations={},this._removeOperations={},g})},include:function(a){return this._include=a,this},increment:function(a,b){return"undefined"==typeof b&&(b=1),this._operations[a]={__op:e.INCREMENT,amount:b},this},add:function(a,c,d){var f,g=this.get(a),h=e.ADD,i=!0;return g=g||[],c=b.isArray(c)?c:[c],f=g.concat(c),d&&(h=e.ADD_UNIQUE,f=b.unique(f)),this._operations[a]?i=!1:this._operations[a]={__op:h,objects:c},this.set(a,f,{skipDeleteOperation:i})},addUnique:function(a,b){return this.add(a,b,!0)},remove:function(a,c){var d,f=this.get(a)||[],g=e.REMOVE,h=!0;return c=b.isArray(c)?c:[c],d=b.clone(c),d.unshift(f),d=b.without.apply(b,d),this._operations[a]?h=!1:this._operations[a]={__op:g,objects:c},this.set(a,d,{skipDeleteOperation:h})},setRelation:function(b,c){var d=new a.Relation(c,this,b);return this.set(b,d),d},setPointer:function(b,c,d){var e=new a.Pointer(c,d,this,b);return this.set(b,e),e},addRelation:function(a,b){this._addRelationOperators(e.ADD_RELATION,a,b)},removeRelation:function(a,b){this._addRelationOperators(e.REMOVE_RELATION,a,b)},_addRelationOperators:function(a,c,d){d=b.isArray(d)?d:[d],this._operations[c]=this._operations[c]||{},this._operations[c]&&this._operations[c].__op&&this._operations[c].__op===a||(this._operations[c]={__op:a,objects:[]}),this._operations[c].objects=this._operations[c].objects.concat(b.map(d,function(a){return{__type:f.RELATION,dataName:a.name,objectId:a.get("objectId")}}))},_isCreated:function(){return this.get("objectId")?!0:!1},getAcl:function(){return this.get("ACL")||this.set("ACL",new a.Acl),this.get("ACL")},setAcl:function(a){this.set("ACL",a)}}),a.Object.create=function(b,c,d){return new(a.Object.extend({name:b}))(c,d)},a.Object.saveAll=function(c,d){var e,f,g=new a.Batches;return d=d||{},d.success&&(e=d.success,d.success=function(a){a.results&&a.results.length&&b.each(a.results,function(a,e){var f,g,h=c[e];if(a.success){if(g=a.success,f=h.parse(g,d),b.isObject(f)&&!h.set(f,d))return;h.trigger("sync",h,g,d)}else a.error&&(g=a.error,h.trigger("error",h,g,d))}),e(c,a,d)}),d.error&&(f=d.error,d.error=function(a){f(c,a,d)}),g.addRequests(function(){b.invoke(c,"save")}),g.request(d).then(function(){return c})},a.Object.destroyAll=function(c,d){var e,f,g=new a.Batches;return d=d||{},d.success&&(e=d.success,d.success=function(a){a.results&&a.results.length&&b.each(a.results,function(a,b){var e,f=c[b];a.success?(e=a.success,f.isNew()?f.trigger("destroy",f,f.collection,d):f.trigger("sync",f,e,d)):(e=a.error,f.trigger("error",f,e,d))}),e(c,a,d)}),d.error&&(f=d.error,d.error=function(a){f(c,a,d)}),g.addRequests(function(){b.invoke(c,"destroy")}),g.request(d).then(function(){return c})},a.Object.extend=d.Model.extend}(e),function(a){var c={WRITE:"write",READ:"read"},e="*",f="role:",g=":";a.Acl=function(b){this._acl={},b instanceof a.Acl?this._acl=b.toJSON():b?this._acl=b:this._acl[e]={read:!0,write:!0}},b.extend(a.Acl.prototype,d.Events,{toJSON:function(){return b.clone(this._acl)},setPublicReadAccess:function(a){return this._setAccessControl(c.READ,e,a),this},setPublicWriteAccess:function(a){return this._setAccessControl(c.WRITE,e,a),this},setReadAccess:function(a,b){return this._setAccessControl(c.READ,a,b),this},setWriteAccess:function(a,b){return this._setAccessControl(c.WRITE,a,b),this},_setAccessControl:function(c,d,e){if(d instanceof a.Role){if(!d.get("name"))throw new Error("Role needs a name before assign to ACL");d=f+d.get("name")}else d instanceof a.User&&(d=d.get("objectId"));this._acl[d]=this._acl[d]||{},!e&&this._acl[d][c]&&delete this._acl[d][c],e&&(this._acl[d][c]=!0),0===b.keys(this._acl[d]).length&&delete this._acl[d]},canRead:function(a){return this._canAccess(c.READ,a)},canWrite:function(a){return this._canAccess(c.WRITE,a)},_canAccess:function(c,d){var h=!1,i=!1,j=!1;return d&&"*"!==d?d instanceof a.Role?j=!0:d instanceof a.User&&(i=!0):h=!0,b.some(this._acl,function(a,h){var k,l=0===h.indexOf(f);return l&&(k=b.rest(h.split(g)).join(g)),(h===e||l&&j&&d.get("name")===k||i&&d.get("objectId")===h)&&a[c]?!0:void 0})}}),a.Acl.create=function(b){return new a.Acl(b)},a.Acl.extend=d.Model.extend}(e),function(a){var e="Pointer";a.Pointer=function(c,d,f,g){if(this._name=null,this._id=null,this._data=null,this._parent=f,this._key=g,"string"==typeof c)this._name=c,this._id=d;else if(c instanceof a.Object)this._name=c.name,this._id=c.get("objectId"),this._data=c;else{if(!c.__type||c.__type!==e)throw new Error("Invalid Pointer type");this._name=c.dataName,this._id=c.objectId,delete c.dataName,delete c.objectId,delete c.__type,c&&b.keys(c).length&&(this._data=a.Object.create(this._name,b.extend(c,{objectId:this._id})))}},b.extend(a.Pointer.prototype,d.Events,{toJSON:function(){return{__type:e,dataName:this._name,objectId:this._id}},fetch:function(b,d){return b=b||{},!d&&this._data?(b.success&&b.success(this._data),c.resolve(this._data)):(this._data=a.Object.create(this._name,{objectId:this._id}),this._data.fetch(b))},setParent:function(a){return this._parent=a,this},getParent:function(){return this._parent},setKey:function(a){return this._key=a,this},getObject:function(){return this._data||null}}),a.Pointer.create=function(b,c,d,e){return new a.Pointer(b,c,d,e)},a.Pointer.extend=d.Model.extend}(e),function(a){var c="Relation";a.Relation=function(b,d,e){if(this._name=null,this._data=null,this._parent=this.setParent(d),this._key=e,this._isAdded=!1,this._isRemoved=!1,"string"==typeof b)this._name=b;else if(b instanceof a.Table)this._name=b.name,this._data=b;else{if(!b.__type||b.__type!==c)throw new Error("Invalid Relation type");this._name=b.dataName}this._data||(this._data=a.Table.create(this._name))},b.extend(a.Relation.prototype,d.Events,{toJSON:function(){return{__type:c,dataName:this._name}},getTable:function(){return this._data},setParent:function(a){return a&&(this._parent=a,this.listenTo(this._parent,"sync",function(){this._isAdded=!1,this._isRemoved=!1})),this},setKey:function(a){return this._key=a,this},getParent:function(){return this._parent},add:function(a){if(this._data.add(a),!this._parent)throw new Error("To add operation needs a parent instance");if(this._isRemoved)throw new Error("Save a parent object first to remove relation rows");return this._parent.addRelation(this._key,a),this._isAdded=!0,this},remove:function(a){if(this._data.remove(a),!this._parent)throw new Error("To remove operation needs a parent instance");if(this._isAdded)throw new Error("Save a parent object first to add relation rows");return this._parent.removeRelation(this._key,a),this._isRemoved=!0,this},fetch:function(a){return this._data.resetQuery().relatedTo(this._parent,this._key).fetch(a)},fetchNotRelated:function(a){return this._data.resetQuery().notRelatedTo(this._parent,this._key).fetch(a)}}),a.Relation.create=function(b,c,d){return new a.Relation(b,c,d)},a.Relation.extend=d.Model.extend}(e),function(a){var c="Date";Date.prototype.toISOString||!function(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),a.Date=function(b){if("object"==typeof b)if(b instanceof Date)b=b.toISOString();else if(b instanceof a.Date)b=b.toString();else{if(!b.__type||b.__type!==c)throw new Error("Invalid Date type");b=b.iso}else b="string"==typeof b?new Date(b).toISOString():(new Date).toISOString();this._iso=b},b.extend(a.Date.prototype,{toString:function(){return this._iso},toJSON:function(){return{__type:c,iso:this._iso}}}),a.Date.extend=d.Model.extend}(e),function(a){var c=100,e=0;a.Table=d.Collection.extend({model:a.Object,name:"",url:function(){return a.URL+"/data/"+this.name},initialize:function(a,b){this._skip=e,this._limit=c,this._keys=null,this._count=null,this._totalCount=null,this._useCount=!1,this._include=null,this._or=!1,this._orPointer=null,this._where=null,this._wherePointer=null,this._query={},this._order=[],this._inDistance=null,b=b||{},b.useCount&&(this._useCount=b.useCount),this.model=this.model.extend({name:this.name})},parse:function(a){var b=null;return a.results&&a.results.length&&(b=a.results),this._totalCount=a.totalCount,this._count=a.count,b},fetch:function(a){var c=this;return a=a||{},a.data=b.defaults(a.data||{},{limit:this._limit,skip:this._skip}),this._keys&&(a.data.keys=this._keys),this._include&&(a.data.include=this._include),this._useCount&&(a.data.count=this._useCount?1:0),this._query&&b.keys(this._query).length&&(a.data.where=JSON.stringify(this._query)),this._order.length&&(a.data.order=this._order.join(",")),d.Collection.prototype.fetch.call(this,a).then(function(){return c})},getQuery:function(){return this._query},include:function(a){return this._include=a,this},skip:function(a){return this._skip=a||0,this},limit:function(a){return this._limit=a||100,this},keys:function(){return this._keys=arguments.length?b.toArray(arguments).join(","):null,this},useCount:function(a){return this._useCount=a?!0:!1,this},getCount:function(){return this._count||this.length},getTotalCount:function(){return this._totalCount||this.length},where:function(a){return this._or?(b.isNumber(this._or)&&!--this._or&&(this._or=!1,this._orPointer=null),this._query.$or=this._query.$or||[],this._orPointer||(this._orPointer={},this._query.$or.push(this._orPointer)),this._wherePointer=this._orPointer):this._wherePointer=this._query,this._where=a,this},or:function(a){return this._or&&(this._orPointer=null),this._or=a||!0,this},endOr:function(){return this._or=!1,this._orPointer=null,this},_getQuery:function(){if(!this._where)throw new Error("Call where() method first");return this._wherePointer[this._where]=this._wherePointer[this._where]||{},this._wherePointer[this._where]},eq:function(a){if(!this._where)throw new Error("Call where() method first");return this._wherePointer[this._where]=a,this},equals:function(a){return this.eq(a)},lt:function(a){return this._getQuery().$lt=a,this},lte:function(a){return this._getQuery().$lte=a,this},gt:function(a){return this._getQuery().$gt=a,this},gte:function(a){return this._getQuery().$gte=a,this},ne:function(a){return this._getQuery().$ne=a,this},"in":function(a){return a=b.isArray(a)?a:arguments.length>1?b.toArray(arguments):[a],this._getQuery().$in=a,this},nin:function(a){return a=b.isArray(a)?a:arguments.length>1?b.toArray(arguments):[a],this._getQuery().$nin=a,this},exists:function(a){return this._getQuery().$exists=!!a,this},all:function(a){return a=b.isArray(a)?a:[a],this._getQuery().$all=a,this},startWith:function(a){return this._getQuery().$like={__startWith:a},this},endWith:function(a){return this._getQuery().$like={__endWith:a},this},contains:function(a){return this._getQuery().$like={__contains:a},this},resetQuery:function(){return this._skip=e,this._limit=c,this._keys=null,this._or=!1,this._orPointer=null,this._where=null,this._wherePointer=null,this._query={},this._order=[],this},find:function(a){if(!a||!b.isObject(a)||b.isArray(a))throw new Error("Query should be a type as object for querying the BaaS Service");return this._query=a||{},this},ascending:function(a){return this._order.push(a),this},descending:function(a){return this._order.push("-"+a),this},resetOrder:function(){return this._order=[],this},select:function(a,b){this._getQuery().$select=this._makeSelectQuery(a,b)},dontSelect:function(a,b){this._getQuery().$dontSelect=this._makeSelectQuery(a,b)},_makeSelectQuery:function(a,c){var d=a.getQuery();if(!b.keys(d).length)throw new Error("Set query on target table first");return{dataName:a.name,where:d,key:c}},inQuery:function(a,b){return this._query.$inQuery=this._makeInQuery(a,b),this},notInQuery:function(a,b){return this._query.$notInQuery=this._makeInQuery(a,b),this},_makeInQuery:function(a,b){return{query:{where:b.getQuery(),dataName:b.name},key:a}},relatedTo:function(a,b){return this._query.$relatedTo=this._makeRelatedTo(a,b),this},notRelatedTo:function(a,b){return this._query.$notRelatedTo=this._makeRelatedTo(a,b),this},_makeRelatedTo:function(a,b){return{object:{__type:"Relation",dataName:a.name,objectId:a.get("objectId")},key:b}},near:function(c,d){var e=new a.GeoPoint(c,d),f=this._getQuery();return f.$nearSphere=e.toJSON(),this._inDistance&&(f=b.extend(f,this._inDistance)),this},inMiles:function(a){return this._maxDistance("$maxDistanceInMiles",a),this},inKilometers:function(a){return this._maxDistance("$maxDistanceInKilometers",a),this},inRadians:function(a){return this._maxDistance("$maxDistanceInRadians",a),this},_maxDistance:function(a,c){var d=this._getQuery(),e={};e[a]=c,d.$nearSphere?d=b.extend(d,e):this._inDistance=e},within:function(b,c,d,e){var f=null,g=null;return 2===arguments.length&&b instanceof a.GeoPoint&&c instanceof a.GeoPoint?(f=b,g=c):(f=new a.GeoPoint(b,c),g=new a.GeoPoint(d,e)),this._getQuery().$geoWithin={$box:[f.toJSON(),g.toJSON()]},this}}),a.Table.create=function(b,c,d){return new(a.Table.extend({name:b}))(c,d)},a.Table.extend=d.Collection.extend}(e),function(a){var e=null,f="undefined"!=typeof localStorage,g="__baas_current_user",h=function(a){e=a,e.listenToOnce(e,"destroy",l),i(),f&&e.listenTo(e,"change",i)},i=function(){f&&localStorage.setItem(g,JSON.stringify(e.attributes))},j=function(){return f?new a.User(JSON.parse(localStorage.getItem(g))):null},k=function(){f&&localStorage.removeItem(g)},l=function(){e&&e.stopListening(e),e=null,k()};a.User=a.Object.extend({name:"User",urlRoot:function(){return a.URL+"/users"},toJSON:function(){var b=a.Object.prototype.toJSON.apply(this,arguments);return delete b.sessionToken,delete b.emailVerified,b},parse:function(b){return b.sessionToken&&h(this),a.Object.prototype.parse.apply(this,arguments)},signIn:function(a,b,c){return this.save(a,b,c)},logIn:function(c){return c=b.defaults(c||{},{url:a.URL+"/login",data:{username:this.get("username"),password:this.get("password")}}),this.fetch(c)},isLoggedIn:function(){return!!this.get("sessionToken")},sendVerifyEmail:function(b){var e=this;return b=b||{},this.get("email")?d.ajax({url:a.URL+"/verifyemail",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({email:this.get("email")}),success:function(a,c,d){b.success&&b.success(e,d,b)},error:function(a){b.error&&b.error(e,a,b)}}):(b.error&&b.error(this),c.reject())},sendResetPasswordEmail:function(b){var e=this;return b=b||{},this.get("email")?d.ajax({url:a.URL+"/resetpassword",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({email:this.get("email")}),success:function(a,c,d){b.success&&b.success(e,d,b)},error:function(a){b.error&&b.error(e,a,b)}}):(b.error&&b.error(this),c.reject())},linkFacebook:function(a,c){var d=this.get("authData");return a=a||{},d=b.defaults({facebook:{id:a.userID,accessToken:a.accessToken,expirationDate:new Date(1e3*a.expiresIn+(new Date).getTime()).toJSON()}},d||{}),this.save({authData:d},c)},unlinkFacebook:function(a){var c=this.get("authData");return c=b.defaults({facebook:null},c||{}),this.save({authData:c},a)},isLinkedFacebook:function(){var a=this.get("authData");return a&&a.facebook},linkTwitter:function(a,c){var d=this.get("authData");return a=a||{},d=b.defaults({twitter:{id:a.id,screenName:a.screenName,consumerKey:a.consumerKey,consumerSecret:a.consumerSecret,authToken:a.authToken,authTokenSecret:a.authTokenSecret}},d||{}),this.save({authData:d},c)},unlinkTwitter:function(a){var c=this.get("authData");return c=b.defaults({twitter:null},c||{}),this.save({authData:c},a)},isLinkedTwitter:function(){var a=this.get("authData");return a&&a.twitter}}),a.User.getMe=function(){return e||(e=j()),e},a.User.isLoggedIn=function(){return e&&e.isLoggedIn()},a.User.logOut=function(){l()},a.User.logIn=function(b,c,d){d=d||{};var e=new a.User({username:b,password:c});return e.logIn(d)},a.User.create=function(b,c){return new a.User(b,c)},a.User.linkFacebook=function(b,c){var d=new a.User;return d.linkFacebook(b,c).then(function(){return d})},a.User.linkTwitter=function(b,c){var d=new a.User;return d.linkTwitter(b,c).then(function(){return d})},a.User.extend=d.Model.extend}(e),function(a){a.Users=a.Table.extend({name:"User",model:a.User,url:function(){return a.URL+"/users"}}),a.Users.create=function(b,c){return new a.Users(b,c)},a.Users.extend=d.Collection.extend}(e),function(a){a.Role=a.Object.extend({name:"Role",urlRoot:function(){return a.URL+"/roles"},initialize:function(){a.Object.prototype.initialize.apply(this,arguments),this.get("users")||this.set("users",new a.Relation(new a.Users,this,"users")),this.get("roles")||this.set("roles",new a.Relation(new a.Roles,this,"roles")),this.get("ACL")||this.set("ACL",new a.Acl)},getAcl:function(){return this.get("ACL")},getUsers:function(){return this.get("users")},getRoles:function(){return this.get("roles")}}),a.Role.create=function(b,c){return new a.Role(b,c)},a.Role.extend=d.Model.extend}(e),function(a){a.Roles=a.Table.extend({name:"Role",model:a.Role,url:function(){return a.URL+"/roles"}}),a.Roles.create=function(b,c){return new a.Roles(b,c)},a.Roles.extend=d.Collection.extend}(e),function(a){var e={SYSTEM:"system",CUSTOM:"custom"},f={ANDROID:"android",IOS:"ios",WEB:"web"};a.Log=function(g,h,i){var j;return i=i||{},"object"==typeof g?(i=h,j=g):j={message:g,code:h},console.log((j.code?"["+j.code+"] ":"")+j.message),j.code?(j=b.defaults(j,{logType:e.CUSTOM,deviceType:f.WEB}),d.ajax({url:a.URL+"/logs",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(j),success:i.success,error:i.error})):c.resolve()},a.Log.DEVICE_TYPE=f,a.Log.LOG_TYPE=e}(e),function(a){a.File=a.Object.extend({name:"File",idAttribute:"name",urlRoot:function(){return a.URL+"/files"}}),a.File.upload=function(e,f){var g=e instanceof jQuery?e[0]:e,h=[];return f=f||{},c.all(b.map(g.files,function(b){var c=new FormData;return c.append("uploadfile",b),d.ajax({url:a.URL+"/files",data:c,type:"POST",cache:!1,contentType:!1,processData:!1}).then(function(b){b&&h.push(new a.File(b))})})).then(function(){return f.success&&f.success(h),h}).fail(function(a){return f.error&&f.error(a),c.reject(a)})},a.File.create=function(b,c){return new a.File(b,c)},a.File.extend=d.Model.extend}(e),function(a){a.Files=a.Table.extend({name:"File",model:a.File,url:function(){return a.URL+"/files"}}),a.Files.create=function(b,c){new a.Files(b,c)},a.Files.extend=d.Collection.extend}(e),function(a){a.GeoPoint=function(b,c){this._latitude=0,this._longitude=0,c?(this._latitude=parseFloat(b),this._longitude=parseFloat(c)):b&&(b instanceof a.GeoPoint?(this._latitude=parseFloat(b.toString().latitude),this._longitude=parseFloat(b.toString().longitude)):(this._latitude=parseFloat(b.latitude),this._longitude=parseFloat(b.longitude)))},b.extend(a.GeoPoint.prototype,d.Events,{toJSON:function(){return{latitude:this._latitude,longitude:this._longitude}},getLatitude:function(){return this._latitude},getLongitude:function(){return this._longitude},setLatitude:function(a){return this._latitude=parseFloat(a),this},setLongitude:function(a){return this._longitude=parseFloat(a),this}}),a.GeoPoint.create=function(b,c){return new a.GeoPoint(b,c)},a.GeoPoint.extend=d.Model.extend,a.GeoPoint.keys=["latitude","longitude"]}(e),function(a){a.Batches=function(){this._requests=[]},b.extend(a.Batches.prototype,d.Events,{url:a.URL+"/batches",put:function(b,c){return this._add("PUT",b,c),a.Batches},post:function(b,c){return this._add("POST",b,c),a.Batches},"delete":function(b,c){return this._add("DELETE",b,c),a.Batches},reset:function(){return this._requests=[],a.Batches},addRequests:function(a){var e=d.ajax,f=[];d.ajax=function(a){return f.push(a),c.resolve()},a(),d.ajax=e,b.each(f,function(a){var b=a.type.toLowerCase();this[b]&&this[b](a.url,a.data)},this)},_add:function(b,c,d){c=c.replace(a.ROOT_URL,""),this._requests.push({path:c,method:b,body:d})},request:function(a){return a=a||{},this._requests.length?d.ajax({url:this.url,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({requests:this._requests}),success:a.success,error:a.error}):(a.success&&a.success(),c.resolve())}})}(e),e},this),"undefined"!=typeof exports&&(exports.Baas=this.Baas);